<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vocational English AI Coach</title>
    <style>
        body { font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif; background: #f0f4f8; color: #333; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: auto; background: white; padding: 40px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        h1 { color: #1a73e8; text-align: center; margin-bottom: 30px; }
        .scenario-card { background: #ffffff; border: 2px solid #e1e4e8; border-left: 8px solid #34a853; padding: 20px; border-radius: 12px; margin-bottom: 25px; }
        .scenario-title { font-weight: bold; color: #202124; font-size: 1.2em; margin-bottom: 10px; display: block; }
        textarea { width: 100%; height: 200px; padding: 15px; border: 2px solid #dfe1e5; border-radius: 12px; font-size: 16px; box-sizing: border-box; resize: vertical; }
        textarea:focus { border-color: #1a73e8; outline: none; box-shadow: 0 0 8px rgba(26,115,232,0.2); }
        button { background: #1a73e8; color: white; border: none; padding: 16px; border-radius: 12px; cursor: pointer; font-size: 18px; font-weight: 600; width: 100%; margin-top: 20px; transition: all 0.3s; }
        button:hover { background: #1557b0; transform: translateY(-1px); }
        button:disabled { background: #bdc1c6; cursor: not-allowed; }
        #loading { display: none; text-align: center; margin: 20px 0; color: #1a73e8; font-weight: bold; }
        #result { margin-top: 30px; padding: 25px; border-radius: 12px; background: #f8f9fa; border: 1px solid #dee2e6; display: none; line-height: 1.8; }
        .score-badge { display: inline-block; padding: 5px 15px; background: #fbbc05; color: #fff; border-radius: 20px; font-weight: bold; margin-bottom: 10px; }
    </style>
</head>
<body>

<div class="container">
    <h1>è·æ¶¯è‹±èª AI å°å¸«</h1>

    <div class="scenario-card">
        <span class="scenario-title">ğŸ“Œ ä»»å‹™æƒ…å¢ƒï¼šGlobal Education Consultancy</span>
        <p><strong>èƒŒæ™¯ï¼š</strong> å®¢æˆ¶ SunnyB æŠ±æ€¨æ²’æ”¶åˆ° 10% æŠ˜æ‰£ï¼Œä¸”ä¸çŸ¥å¦‚ä½•è¯çµ¡å“¡å·¥ã€‚</p>
        <p><strong>è¦æ±‚ï¼š</strong> è«‹å¯«ä¸€å° 50-100 å­—çš„è‹±æ–‡é›»éƒµï¼Œå‘ä»–è§£é‡‹æŠ˜æ‰£è¦å‰‡ä¸¦æä¾›è¯çµ¡è³‡æ–™ã€‚</p>
    </div>

    <textarea id="studentResponse" placeholder="è«‹åœ¨æ­¤è¼¸å…¥ä½ çš„è‹±æ–‡å›è¦†..."></textarea>
    
    <button id="submitBtn" onclick="analyzeResponse()">æäº¤ AI æ‰¹æ”¹</button>
    
    <div id="loading">ğŸš€ AI æ­£åœ¨é–±è®€ä½ çš„å›è¦†ï¼Œè«‹ç¨å€™...</div>
    <div id="result"></div>
</div>

<script>
    // ç›´æ¥åœ¨æ­¤è™•å¡«å…¥ä½ çš„ API Key
    const CONFIG_API_KEY = "AIzaSyD7yMHF2TFf8LC2ykY5h2-Ra1sW5hl1Ef8"; 

    async function analyzeResponse() {
        const text = document.getElementById('studentResponse').value;
        const btn = document.getElementById('submitBtn');
        const loading = document.getElementById('loading');
        const resultDiv = document.getElementById('result');

        if (!text || text.trim().length < 10) {
            alert("è«‹è¼¸å…¥æ›´å®Œæ•´çš„å›è¦†ï¼ˆè‡³å°‘ 10 å€‹å­—ï¼‰ã€‚");
            return;
        }

        btn.disabled = true;
        loading.style.display = "block";
        resultDiv.style.display = "none";

        const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${CONFIG_API_KEY}`;

        // æ§‹å»ºé‡å°èª²ç¨‹è³‡æ–™çš„è¨“ç·´æŒ‡ä»¤ (System Instruction)
        const prompt = `
            ä½ æ˜¯è·æ¶¯è‹±èªå°ˆå®¶ã€‚è«‹åˆ†æé€™å°å­¸ç”Ÿå¯«çš„é›»éƒµï¼š
            """${text}"""

            è«‹åš´æ ¼æŒ‰ä»¥ä¸‹çµæ§‹å›è¦†ï¼ˆä½¿ç”¨ç¹é«”ä¸­æ–‡å’Œè‹±æ–‡ï¼‰ï¼š
            1. [Score]: çµ¦äºˆ 0-100 è©•åˆ†ã€‚
            2. [Grammar & Vocab]: æŒ‡å‡ºéŒ¯èª¤ä¸¦ä¿®æ­£ã€‚
            3. [Professionalism]: è©•åƒ¹èªæ°£æ˜¯å¦å°ˆæ¥­ã€ç¦®è²Œã€‚
            4. [Consistency Check]: æª¢æŸ¥æ˜¯å¦ç¬¦åˆä»¥ä¸‹æ•™æè³‡æ–™ï¼š
               - æŠ˜æ‰£å¿…é ˆæ˜¯ 15 äººæˆ–ä»¥ä¸Šåœ˜é«”æ‰æœ‰ã€‚
               - è¯çµ¡æ™‚é–“æ˜¯ Mon-Sat, 9am-6pmã€‚
            5. [Suggestion]: çµ¦äºˆä¸€å¥é¼“å‹µçš„è©±ã€‚
        `;

        try {
            const response = await fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: prompt }] }]
                })
            });

            const data = await response.json();
            
            if (data.candidates && data.candidates[0].content.parts[0].text) {
                let feedback = data.candidates[0].content.parts[0].text;
                // ç°¡å–®è½‰æ› Markdown æ ¼å¼ç‚º HTML
                feedback = feedback.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                feedback = feedback.replace(/\n/g, '<br>');
                
                resultDiv.innerHTML = feedback;
                resultDiv.style.display = "block";
            } else {
                throw new Error("Invalid Response");
            }
        } catch (error) {
            resultDiv.innerHTML = "<span style='color:red;'>ç³»çµ±ç¹å¿™æˆ– API Key ç„¡æ•ˆï¼Œè«‹ç¨å¾Œå†è©¦ã€‚</span>";
            resultDiv.style.display = "block";
            console.error(error);
        } finally {
            btn.disabled = false;
            loading.style.display = "none";
        }
    }
</script>

</body>
</html>