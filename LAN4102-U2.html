<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LAN4102: Workplace English - Interactive Games</title>
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #3498db;
            --success: #27ae60;
            --error: #c0392b;
            --light: #ecf0f1;
            --dark: #2c3e50;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #eef2f5;
            color: #333;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--light);
            padding-bottom: 20px;
        }

        h1 { color: var(--primary); margin: 0; font-size: 2.2em; }
        p.subtitle { color: #7f8c8d; margin-top: 5px; font-size: 1.1em; }

        /* Progress Bar */
        .progress-container {
            background-color: var(--light);
            border-radius: 10px;
            margin: 20px 0;
            height: 10px;
            overflow: hidden;
            display: none; /* Hidden by default */
        }
        .progress-bar {
            background-color: var(--accent);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Navigation */
        .nav-tabs {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
        }

        .nav-btn {
            background: white;
            border: 2px solid var(--light);
            padding: 12px 25px;
            cursor: pointer;
            border-radius: 25px;
            font-weight: bold;
            color: var(--primary);
            transition: all 0.3s ease;
        }

        .nav-btn:hover { border-color: var(--accent); color: var(--accent); }
        .nav-btn.active { background: var(--accent); color: white; border-color: var(--accent); }
        .nav-btn.disabled { opacity: 0.5; cursor: not-allowed; pointer-events: none; }

        /* Game Sections */
        .game-section { display: none; animation: fadeIn 0.4s; }
        .game-section.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Game 1: Sorter */
        .sortable-list { list-style: none; padding: 0; margin: 20px 0; }
        .sortable-item {
            background: white;
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 10px;
            cursor: grab;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: transform 0.2s;
        }
        .sortable-item:active { cursor: grabbing; transform: scale(1.02); border-color: var(--accent); }
        
        /* Game 2: Categorizer */
        .snippet-card {
            background: #fff;
            border: 2px solid var(--primary);
            padding: 30px;
            text-align: center;
            font-size: 1.3em;
            border-radius: 12px;
            margin-bottom: 25px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        .category-buttons { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .cat-btn {
            padding: 18px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.2s;
            box-shadow: 0 4px 0 #2980b9;
        }
        .cat-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 0 #2980b9; }
        .cat-btn:active { transform: translateY(2px); box-shadow: 0 0 0 #2980b9; }

        /* Game 3: Vocab */
        .vocab-container { margin-top: 20px; }
        .vocab-question-card {
            background: white;
            border: 1px solid #ddd;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 10px;
        }
        .vocab-text { font-size: 1.2em; margin-bottom: 15px; }
        .vocab-options { display: flex; gap: 10px; flex-wrap: wrap; }
        .vocab-opt-btn {
            padding: 8px 16px;
            border: 2px solid var(--accent);
            background: white;
            color: var(--accent);
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
        }
        .vocab-opt-btn:hover { background: var(--accent); color: white; }
        .vocab-opt-btn.selected { background: var(--primary); color: white; border-color: var(--primary); }

        /* Results Section */
        #results-section { text-align: center; padding: 40px 20px; }
        .final-score { font-size: 4em; color: var(--accent); font-weight: bold; margin: 20px 0; }
        .score-breakdown { text-align: left; max-width: 400px; margin: 0 auto; background: var(--light); padding: 20px; border-radius: 10px; }
        .breakdown-row { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 1.1em; }

        /* Common UI */
        .btn-action {
            display: block;
            width: 100%;
            padding: 15px;
            background: var(--success);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.2em;
            cursor: pointer;
            margin-top: 30px;
            transition: background 0.3s;
        }
        .btn-action:hover { background: #219150; }
        
        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            display: none;
        }
        .feedback.correct { background: #d4edda; color: #155724; display: block; }
        .feedback.incorrect { background: #f8d7da; color: #721c24; display: block; }

        .game-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .counter { font-size: 1.2em; font-weight: bold; color: var(--primary); }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>LAN4102: Interactive Games</h1>
        <p class="subtitle">Module: Resume Writing & Job Applications</p>
    </header>

    <div class="nav-tabs">
        <button id="btn-tab-1" class="nav-btn active" onclick="showGame('game1')">1. Structure</button>
        <button id="btn-tab-2" class="nav-btn" onclick="showGame('game2')">2. Categories</button>
        <button id="btn-tab-3" class="nav-btn" onclick="showGame('game3')">3. Action Verbs</button>
    </div>

    <div id="game1" class="game-section active">
        <div class="game-header">
            <h2>Game 1: The Logical Order</h2>
            <div class="counter">Moves: <span id="moves">0</span></div>
        </div>
        <p>Drag and drop the resume sections into the standard reverse-chronological order used in Hong Kong vocational resumes.</p>
        
        <ul class="sortable-list" id="sortable-list">
            </ul>
        <button class="btn-action" onclick="checkOrder()">Check Order</button>
        <div id="feedback1" class="feedback"></div>
        <button id="btn-next-2" class="btn-action" style="display:none; background:var(--accent);" onclick="showGame('game2')">Next Game &rarr;</button>
    </div>

    <div id="game2" class="game-section">
        <div class="game-header">
            <h2>Game 2: Where does it belong?</h2>
            <div class="counter">Question: <span id="q-counter-2">1</span>/15</div>
        </div>
        <div class="progress-container" style="display:block;">
            <div id="progress-2" class="progress-bar"></div>
        </div>
        <p>Read the resume content below and decide which section it belongs to.</p>
        
        <div class="snippet-card" id="snippet-display">Loading...</div>

        <div class="category-buttons">
            <button class="cat-btn" onclick="handleCategoryInput('Profile')">Job Objective / Profile</button>
            <button class="cat-btn" onclick="handleCategoryInput('Education')">Education</button>
            <button class="cat-btn" onclick="handleCategoryInput('Experience')">Work Experience</button>
            <button class="cat-btn" onclick="handleCategoryInput('Skills')">Skills / Languages</button>
        </div>
        <div id="feedback2" class="feedback"></div>
    </div>

    <div id="game3" class="game-section">
        <div class="game-header">
            <h2>Game 3: Power Verbs</h2>
            <div class="counter">Question: <span id="q-counter-3">1</span>/15</div>
        </div>
        <div class="progress-container" style="display:block;">
            <div id="progress-3" class="progress-bar"></div>
        </div>
        <p>Choose the best action verb to complete the sentence.</p>
        
        <div id="vocab-display" class="snippet-card" style="flex-direction: column; gap: 20px;">
            </div>
        
        <div id="vocab-options" class="category-buttons">
            </div>
        <div id="feedback3" class="feedback"></div>
    </div>

    <div id="results-section" class="game-section">
        <h2>Module Complete!</h2>
        <p>Here is your total performance across all three activities.</p>
        
        <div class="final-score" id="total-score-display">0%</div>
        
        <div class="score-breakdown">
            <div class="breakdown-row">
                <span>Game 1 (Structure):</span>
                <span id="score-g1">Not Played</span>
            </div>
            <div class="breakdown-row">
                <span>Game 2 (Categories):</span>
                <span id="score-g2">0/15</span>
            </div>
            <div class="breakdown-row">
                <span>Game 3 (Action Verbs):</span>
                <span id="score-g3">0/15</span>
            </div>
        </div>

        <button class="btn-action" style="background: var(--accent);" onclick="location.reload()">Try Again</button>
    </div>

</div>

<script>
    // --- DATA ---
    
    // Game 1 Data
    const resumeStructure = [
        { text: "Contact Information (Header)" },
        { text: "Job Objective / Personal Profile" },
        { text: "Education" },
        { text: "Work Experience" },
        { text: "Skills & Languages" },
        { text: "References" }
    ];

    // Game 2 Data (15 items)
    const rawSnippets = [
        { text: "Resourceful, proactive final-year Higher Diploma student.", category: "Profile" },
        { text: "Seeking an entry-level position to apply my knowledge of child development.", category: "Profile" },
        { text: "Detail-minded student with professional training in Inclusive Education.", category: "Profile" },
        { text: "Assisted customers in finding products and answering enquiries.", category: "Experience" },
        { text: "Maintained a clean and organised store environment.", category: "Experience" },
        { text: "Supported Senior Project Officers in collecting data.", category: "Experience" },
        { text: "Provided logistics support to project teams.", category: "Experience" },
        { text: "Identified and recommended products that met customers' needs.", category: "Experience" },
        { text: "Supported the Store Manager in managing inventory.", category: "Experience" },
        { text: "Festival Ambassador (Volunteer) for Sai Kung Arts Festival.", category: "Experience" },
        { text: "Hong Kong Institute of Vocational Education (Sha Tin)", category: "Education" },
        { text: "Higher Diploma in Social Work (2022 - Present)", category: "Education" },
        { text: "Hong Kong Diploma of Secondary Education (2022)", category: "Education" },
        { text: "Completed comprehensive training in social policies.", category: "Education" },
        { text: "Proficient in MS Word, PowerPoint, and Excel.", category: "Skills" },
        { text: "Cantonese (native), Putonghua (fluent), English (conversational).", category: "Skills" }
    ];

    // Game 3 Data (15 items)
    const rawVocab = [
        { q: "______ customers in finding products.", a: "Assisted", opts: ["Assisted", "Watched", "Saw", "Did"] },
        { q: "______ a clean and organised store environment.", a: "Maintained", opts: ["Maintained", "Kept", "Stayed", "Held"] },
        { q: "______ logistics support to project teams.", a: "Provided", opts: ["Provided", "Gave", "Handed", "Took"] },
        { q: "______ products that met customers' needs.", a: "Recommended", opts: ["Recommended", "Spoke", "Told", "Said"] },
        { q: "______ comprehensive training in social work.", a: "Completed", opts: ["Completed", "Ended", "Finished", "Stopped"] },
        { q: "______ practical experience through fieldwork.", a: "Gained", opts: ["Gained", "Took", "Found", "Made"] },
        { q: "______ strong analytical and communication skills.", a: "Developed", opts: ["Developed", "Grew", "Built", "Made"] },
        { q: "______ me with interpersonal skills.", a: "Equipped", opts: ["Equipped", "Gave", "Helped", "Tool"] },
        { q: "______ Level 3 in Chinese Language.", a: "Achieved", opts: ["Achieved", "Got", "Won", "Took"] },
        { q: "______ an entry-level position.", a: "Seeking", opts: ["Seeking", "Looking", "Wanting", "Hoping"] },
        { q: "______ data on low-income residents.", a: "Collected", opts: ["Collected", "Gathered", "Got", "Took"] },
        { q: "______ presentations on projects.", a: "Prepared", opts: ["Prepared", "Made", "Did", "Wrote"] },
        { q: "______ inventory levels.", a: "Managed", opts: ["Managed", "Watched", "Looked", "Saw"] },
        { q: "______ enquiries from customers.", a: "Answered", opts: ["Answered", "Replied", "Talked", "Said"] },
        { q: "______ the setup of the festival.", a: "Supported", opts: ["Supported", "Helped", "Aided", "Did"] }
    ];

    // --- STATE ---
    let state = {
        g1: { moves: 0, completed: false, score: 0 },
        g2: { queue: [], currentIdx: 0, score: 0 },
        g3: { queue: [], currentIdx: 0, score: 0 }
    };

    // --- UTILS ---
    function shuffle(array) {
        return array.sort(() => Math.random() - 0.5);
    }

    function showGame(gameId) {
        // Hide all
        document.querySelectorAll('.game-section').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
        
        // Show specific
        document.getElementById(gameId).classList.add('active');
        
        // Update nav button
        if(gameId === 'game1') document.getElementById('btn-tab-1').classList.add('active');
        if(gameId === 'game2') document.getElementById('btn-tab-2').classList.add('active');
        if(gameId === 'game3') document.getElementById('btn-tab-3').classList.add('active');
    }

    // --- GAME 1: ORDER ---
    let dragStartIndex;
    
    function initGame1() {
        const list = document.getElementById('sortable-list');
        list.innerHTML = '';
        const shuffled = shuffle([...resumeStructure]);
        
        shuffled.forEach((item, index) => {
            const li = document.createElement('li');
            li.setAttribute('data-index', index);
            li.setAttribute('draggable', 'true');
            li.classList.add('sortable-item');
            li.innerHTML = `<span>:: ${item.text}</span>`;
            list.appendChild(li);
            
            li.addEventListener('dragstart', function() { dragStartIndex = +this.getAttribute('data-index'); });
            li.addEventListener('dragover', e => e.preventDefault());
            li.addEventListener('drop', function() {
                const dragEndIndex = +this.getAttribute('data-index');
                swapItems(dragStartIndex, dragEndIndex);
                state.g1.moves++;
                document.getElementById('moves').innerText = state.g1.moves;
            });
            li.addEventListener('dragenter', function() { this.classList.add('over'); });
            li.addEventListener('dragleave', function() { this.classList.remove('over'); });
        });
    }

    function swapItems(fromIndex, toIndex) {
        const items = document.querySelectorAll('.sortable-item');
        const itemOne = items[fromIndex].querySelector('span');
        const itemTwo = items[toIndex].querySelector('span');
        const temp = itemOne.innerText;
        itemOne.innerText = itemTwo.innerText;
        itemTwo.innerText = temp;
    }

    function checkOrder() {
        const current = [];
        document.querySelectorAll('.sortable-item span').forEach(s => current.push(s.innerText.replace(':: ', '')));
        const correct = resumeStructure.map(s => s.text);
        
        const fb = document.getElementById('feedback1');
        if (JSON.stringify(current) === JSON.stringify(correct)) {
            fb.className = "feedback correct";
            fb.innerText = "Correct! You have the perfect resume structure.";
            state.g1.completed = true;
            state.g1.score = 100; // Binary score for G1
            document.getElementById('btn-next-2').style.display = 'block';
        } else {
            fb.className = "feedback incorrect";
            fb.innerText = "Not quite. Hints: Contact goes first, References go last.";
        }
    }

    // --- GAME 2: CATEGORIES ---
    function initGame2() {
        // Select 15 items randomly (or just shuffle all 15 if that's the full set)
        state.g2.queue = shuffle([...rawSnippets]).slice(0, 15);
        state.g2.currentIdx = 0;
        state.g2.score = 0;
        loadG2Item();
    }

    function loadG2Item() {
        if (state.g2.currentIdx >= 15) {
            endGame2();
            return;
        }
        
        const item = state.g2.queue[state.g2.currentIdx];
        document.getElementById('snippet-display').innerText = `"${item.text}"`;
        document.getElementById('q-counter-2').innerText = state.g2.currentIdx + 1;
        document.getElementById('feedback2').style.display = 'none';
        
        // Update bar
        const pct = ((state.g2.currentIdx) / 15) * 100;
        document.getElementById('progress-2').style.width = pct + "%";
        
        // Re-enable buttons
        document.querySelectorAll('#game2 .cat-btn').forEach(b => b.disabled = false);
    }

    function handleCategoryInput(selection) {
        const item = state.g2.queue[state.g2.currentIdx];
        const fb = document.getElementById('feedback2');
        const btns = document.querySelectorAll('#game2 .cat-btn');
        
        btns.forEach(b => b.disabled = true); // Prevent double click

        if (selection === item.category || (item.category === 'Skills' && selection === 'Skills')) {
            fb.className = "feedback correct";
            fb.innerText = "Correct!";
            state.g2.score++;
        } else {
            fb.className = "feedback incorrect";
            fb.innerText = `Incorrect. That was a ${item.category} item.`;
        }
        
        state.g2.currentIdx++;
        setTimeout(loadG2Item, 1200);
    }

    function endGame2() {
        document.getElementById('snippet-display').innerHTML = "<b>Section Complete!</b>";
        document.getElementById('progress-2').style.width = "100%";
        document.querySelector('#game2 .category-buttons').style.display = 'none';
        document.getElementById('feedback2').style.display = 'none';
        
        const nextBtn = document.createElement('button');
        nextBtn.className = 'btn-action';
        nextBtn.style.background = 'var(--accent)';
        nextBtn.innerText = "Proceed to Game 3";
        nextBtn.onclick = () => showGame('game3');
        document.getElementById('game2').appendChild(nextBtn);
    }

    // --- GAME 3: VOCAB ---
    function initGame3() {
        state.g3.queue = shuffle([...rawVocab]).slice(0, 15);
        state.g3.currentIdx = 0;
        state.g3.score = 0;
        loadG3Item();
    }

    function loadG3Item() {
        if (state.g3.currentIdx >= 15) {
            endGame3();
            return;
        }

        const item = state.g3.queue[state.g3.currentIdx];
        document.getElementById('vocab-display').innerText = item.q;
        document.getElementById('q-counter-3').innerText = state.g3.currentIdx + 1;
        document.getElementById('feedback3').style.display = 'none';
        
        const pct = ((state.g3.currentIdx) / 15) * 100;
        document.getElementById('progress-3').style.width = pct + "%";

        // Shuffle options
        const opts = shuffle([...item.opts]);
        const optContainer = document.getElementById('vocab-options');
        optContainer.innerHTML = '';
        
        opts.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'cat-btn';
            btn.innerText = opt;
            btn.onclick = () => handleVocabInput(opt, item.a);
            optContainer.appendChild(btn);
        });
    }

    function handleVocabInput(selected, correct) {
        const fb = document.getElementById('feedback3');
        const btns = document.querySelectorAll('#vocab-options button');
        btns.forEach(b => b.disabled = true);

        if (selected === correct) {
            fb.className = "feedback correct";
            fb.innerText = "Correct!";
            state.g3.score++;
        } else {
            fb.className = "feedback incorrect";
            fb.innerText = `Incorrect. The best word is "${correct}".`;
        }

        state.g3.currentIdx++;
        setTimeout(loadG3Item, 1200);
    }

    function endGame3() {
        showResults();
    }

    // --- RESULTS ---
    function showResults() {
        document.querySelectorAll('.game-section').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
        document.getElementById('results-section').classList.add('active');

        // G1 Score
        const g1Text = state.g1.completed ? "Pass" : "Incomplete";
        document.getElementById('score-g1').innerText = g1Text;
        document.getElementById('score-g1').style.color = state.g1.completed ? "green" : "red";

        // G2 Score
        document.getElementById('score-g2').innerText = `${state.g2.score} / 15`;

        // G3 Score
        document.getElementById('score-g3').innerText = `${state.g3.score} / 15`;

        // Total Calc
        // Logic: G1 is worth 10pts, G2 45pts (3pts each), G3 45pts (3pts each) -> Total 100
        let total = 0;
        if(state.g1.completed) total += 10;
        total += (state.g2.score / 15) * 45;
        total += (state.g3.score / 15) * 45;
        
        document.getElementById('total-score-display').innerText = Math.round(total) + "%";
    }

    // --- INIT ---
    initGame1();
    initGame2();
    initGame3();

</script>

</body>
</html>
