<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LAN4102: Workplace English - Interactive Games</title>
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #3498db;
            --success: #27ae60;
            --error: #c0392b;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --warning-bg: #f9f9e0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #eef2f5;
            color: #333;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--light);
            padding-bottom: 20px;
        }

        h1 { color: var(--primary); margin: 0; font-size: 2.2em; }
        p.subtitle { color: #7f8c8d; margin-top: 5px; font-size: 1.1em; }

        /* Progress Bar */
        .progress-container {
            background-color: var(--light);
            border-radius: 10px;
            margin: 20px 0;
            height: 10px;
            overflow: hidden;
            display: none;
        }
        .progress-bar {
            background-color: var(--accent);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Navigation */
        .nav-tabs {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
        }

        .nav-btn {
            background: white;
            border: 2px solid var(--light);
            padding: 12px 25px;
            cursor: pointer;
            border-radius: 25px;
            font-weight: bold;
            color: var(--primary);
            transition: all 0.3s ease;
        }

        .nav-btn:hover { border-color: var(--accent); color: var(--accent); }
        .nav-btn.active { background: var(--accent); color: white; border-color: var(--accent); }
        .nav-btn.disabled { opacity: 0.5; cursor: not-allowed; pointer-events: none; }

        /* Game Sections */
        .game-section { display: none; animation: fadeIn 0.4s; }
        .game-section.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Game 1: Sorter */
        .sortable-list { list-style: none; padding: 0; margin: 20px 0; }
        .sortable-item {
            background: white;
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 10px;
            cursor: grab;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: transform 0.2s;
        }
        .sortable-item:active { cursor: grabbing; transform: scale(1.02); border-color: var(--accent); }
        
        /* Game 2: Categorizer */
        .snippet-card {
            background: #fff;
            border: 2px solid var(--primary);
            padding: 30px;
            text-align: center;
            font-size: 1.3em;
            border-radius: 12px;
            margin-bottom: 25px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        .category-buttons { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .cat-btn {
            padding: 18px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.2s;
            box-shadow: 0 4px 0 #2980b9;
        }
        .cat-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 0 #2980b9; }
        .cat-btn:active { transform: translateY(2px); box-shadow: 0 0 0 #2980b9; }
        .cat-btn:disabled { background: #bdc3c7; box-shadow: none; transform: none; cursor: default; }

        /* Game 3: Vocab */
        .vocab-container { margin-top: 20px; }
        
        /* Results Section */
        #results-section { text-align: center; padding: 40px 20px; }
        .final-score { font-size: 4em; color: var(--accent); font-weight: bold; margin: 20px 0; }
        .score-breakdown { text-align: left; max-width: 400px; margin: 0 auto; background: var(--light); padding: 20px; border-radius: 10px; }
        .breakdown-row { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 1.1em; }

        /* Common UI */
        .btn-action {
            display: block;
            width: 100%;
            padding: 15px;
            background: var(--success);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.2em;
            cursor: pointer;
            margin-top: 30px;
            transition: background 0.3s;
        }
        .btn-action:hover { background: #219150; }
        
        /* Feedback Box */
        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            display: none;
            border: 2px solid transparent;
        }
        .feedback.correct { background: #d4edda; color: #155724; border-color: #c3e6cb; }
        .feedback.incorrect { background: #f8d7da; color: #721c24; border-color: #f5c6cb; }
        
        .feedback h3 { margin: 0 0 10px 0; font-size: 1.2em; }
        .feedback p { margin: 5px 0; }
        .feedback .zh { color: #666; font-size: 0.95em; font-weight: normal; margin-top: 5px; display: block; }

        .game-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .counter { font-size: 1.2em; font-weight: bold; color: var(--primary); }
        
        .next-q-btn {
            margin-top: 15px;
            padding: 10px 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
        }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>LAN4102: Interactive Games</h1>
        <p class="subtitle">Module: Resume Writing & Job Applications</p>
    </header>

    <div class="nav-tabs">
        <button id="btn-tab-1" class="nav-btn active" onclick="showGame('game1')">1. Structure</button>
        <button id="btn-tab-2" class="nav-btn" onclick="showGame('game2')">2. Categories</button>
        <button id="btn-tab-3" class="nav-btn" onclick="showGame('game3')">3. Action Verbs</button>
    </div>

    <div id="game1" class="game-section active">
        <div class="game-header">
            <h2>Game 1: The Logical Order</h2>
            <div class="counter">Moves: <span id="moves">0</span></div>
        </div>
        <p>Drag and drop the resume sections into the standard reverse-chronological order used in Hong Kong vocational resumes.</p>
        
        <ul class="sortable-list" id="sortable-list">
            </ul>
        <button class="btn-action" onclick="checkOrder()">Check Order</button>
        <div id="feedback1" class="feedback">
            <h3 id="fb1-title"></h3>
            <p id="fb1-text"></p>
        </div>
        <button id="btn-next-2" class="btn-action" style="display:none; background:var(--accent);" onclick="showGame('game2')">Next Game &rarr;</button>
    </div>

    <div id="game2" class="game-section">
        <div class="game-header">
            <h2>Game 2: Where does it belong?</h2>
            <div class="counter">Question: <span id="q-counter-2">1</span>/7</div>
        </div>
        <div class="progress-container" style="display:block;">
            <div id="progress-2" class="progress-bar"></div>
        </div>
        <p>Read the resume content below and decide which section it belongs to.</p>
        
        <div class="snippet-card" id="snippet-display">Loading...</div>

        <div class="category-buttons" id="cat-btns-container">
            <button class="cat-btn" onclick="handleCategoryInput('Profile')">Job Objective / Profile</button>
            <button class="cat-btn" onclick="handleCategoryInput('Education')">Education</button>
            <button class="cat-btn" onclick="handleCategoryInput('Experience')">Work Experience</button>
            <button class="cat-btn" onclick="handleCategoryInput('Skills')">Skills / Languages</button>
        </div>
        
        <div id="feedback2" class="feedback">
            <h3 id="fb2-title"></h3>
            <div id="fb2-content"></div>
            <button class="next-q-btn" onclick="nextQuestionG2()">Next Question &rarr;</button>
        </div>
    </div>

    <div id="game3" class="game-section">
        <div class="game-header">
            <h2>Game 3: Power Verbs</h2>
            <div class="counter">Question: <span id="q-counter-3">1</span>/7</div>
        </div>
        <div class="progress-container" style="display:block;">
            <div id="progress-3" class="progress-bar"></div>
        </div>
        <p>Choose the best action verb to complete the sentence.</p>
        
        <div id="vocab-display" class="snippet-card" style="flex-direction: column; gap: 20px;">
            </div>
        
        <div id="vocab-options" class="category-buttons">
            </div>
        
        <div id="feedback3" class="feedback">
            <h3 id="fb3-title"></h3>
            <div id="fb3-content"></div>
            <button class="next-q-btn" onclick="nextQuestionG3()">Next Question &rarr;</button>
        </div>
    </div>

    <div id="results-section" class="game-section">
        <h2>Module Complete!</h2>
        <p>Here is your total performance.</p>
        
        <div class="final-score" id="total-score-display">0%</div>
        
        <div class="score-breakdown">
            <div class="breakdown-row">
                <span>Game 1 (Structure):</span>
                <span id="score-g1">Not Played</span>
            </div>
            <div class="breakdown-row">
                <span>Game 2 (Categories):</span>
                <span id="score-g2">0/7</span>
            </div>
            <div class="breakdown-row">
                <span>Game 3 (Action Verbs):</span>
                <span id="score-g3">0/7</span>
            </div>
        </div>

        <button class="btn-action" style="background: var(--accent);" onclick="location.reload()">Try Again (New Questions)</button>
    </div>

</div>

<script>
    // --- DATA ---
    const TOTAL_TEST_ITEMS = 7; // User requested 7 questions per session
    
    // Game 1 Data
    const resumeStructure = [
        { text: "Contact Information (Header)" },
        { text: "Job Objective / Personal Profile" },
        { text: "Education" },
        { text: "Work Experience" },
        { text: "Skills & Languages" },
        { text: "References" }
    ];

    // Game 2 Data (20 items in database)
    // Format: { text, category, reason_en, reason_zh }
    const rawSnippets = [
        { text: "Resourceful, proactive final-year Higher Diploma student.", category: "Profile", reason_en: "This describes the candidate's personality and status.", reason_zh: "這描述了求職者的個性和身份（個人簡介）。" },
        { text: "Seeking an entry-level position to apply my knowledge.", category: "Profile", reason_en: "This states the candidate's goal (Objective).", reason_zh: "這說明了求職者的目標（求職目標）。" },
        { text: "Detail-minded student with professional training in Inclusive Education.", category: "Profile", reason_en: "This is a summary of personal attributes and training.", reason_zh: "這是個人特質和受訓背景的摘要。" },
        { text: "Assisted customers in finding products and answering enquiries.", category: "Experience", reason_en: "This is a duty performed in a past job.", reason_zh: "這是過去工作中執行的職責。" },
        { text: "Maintained a clean and organised store environment.", category: "Experience", reason_en: "This is a specific task done at work.", reason_zh: "這是在工作中執行的具體任務。" },
        { text: "Supported Senior Project Officers in collecting data.", category: "Experience", reason_en: "This describes a role in a previous project.", reason_zh: "這描述了在之前項目中的角色。" },
        { text: "Provided logistics support to project teams.", category: "Experience", reason_en: "This is an action verb describing work history.", reason_zh: "這是一個描述工作履歷的行為動詞。" },
        { text: "Identified and recommended products that met customers' needs.", category: "Experience", reason_en: "This is a specific achievement/duty in a job.", reason_zh: "這是在工作中的具體成就或職責。" },
        { text: "Supported the Store Manager in managing inventory.", category: "Experience", reason_en: "This describes who you worked with and what you did.", reason_zh: "這描述了你與誰共事以及你做了什麼。" },
        { text: "Festival Ambassador (Volunteer) for Sai Kung Arts Festival.", category: "Experience", reason_en: "Volunteer work is counted as experience.", reason_zh: "義工服務也算作工作經驗。" },
        { text: "Hong Kong Institute of Vocational Education (Sha Tin)", category: "Education", reason_en: "This is the name of a school/institution.", reason_zh: "這是學校或機構的名稱。" },
        { text: "Higher Diploma in Social Work (2022 - Present)", category: "Education", reason_en: "This is an academic qualification/degree.", reason_zh: "這是一個學歷資格或學位。" },
        { text: "Hong Kong Diploma of Secondary Education (2022)", category: "Education", reason_en: "This is a secondary school qualification.", reason_zh: "這是中學學歷資格。" },
        { text: "Completed comprehensive training in social policies.", category: "Education", reason_en: "This describes what was learned during studies.", reason_zh: "這描述了在學習期間所受的訓練。" },
        { text: "Proficient in MS Word, PowerPoint, and Excel.", category: "Skills", reason_en: "These are computer/software skills.", reason_zh: "這些是電腦或軟件技能。" },
        { text: "Cantonese (native), Putonghua (fluent), English (conversational).", category: "Skills", reason_en: "These are language abilities.", reason_zh: "這些是語言能力。" },
        { text: "Completed a group project on health and service.", category: "Education", reason_en: "Academic projects belong under Education.", reason_zh: "學術專題研習屬於學歷部分。" },
        { text: "Achieved Level 3 in Chinese Language.", category: "Education", reason_en: "This is an exam result derived from school.", reason_zh: "這是學校的考試成績。" },
        { text: "Assisted the artists and event organiser in setting up.", category: "Experience", reason_en: "This is a task performed during volunteer work.", reason_zh: "這是在義工服務期間執行的任務。" },
        { text: "Strategies to support children with diverse needs.", category: "Education", reason_en: "This is a topic studied at school.", reason_zh: "這是由學校修讀的課題。" }
    ];

    // Game 3 Data (20 items in database)
    const rawVocab = [
        { q: "______ customers in finding products.", a: "Assisted", opts: ["Assisted", "Watched", "Saw", "Did"], reason_en: "'Assisted' is professional; 'Did' or 'Saw' is too casual.", reason_zh: "「Assisted」較專業；「Did」或「Saw」太隨意。" },
        { q: "______ a clean and organised store environment.", a: "Maintained", opts: ["Maintained", "Kept", "Stayed", "Held"], reason_en: "'Maintained' implies keeping something in good condition.", reason_zh: "「Maintained」意味著保持良好的狀態。" },
        { q: "______ logistics support to project teams.", a: "Provided", opts: ["Provided", "Gave", "Handed", "Took"], reason_en: "'Provided' is the standard business term for giving support.", reason_zh: "「Provided」是提供支援的標準商業用語。" },
        { q: "______ products that met customers' needs.", a: "Recommended", opts: ["Recommended", "Spoke", "Told", "Said"], reason_en: "You 'recommend' products; you don't just 'say' them.", reason_zh: "你會「推薦」產品，而不只是「說」產品。" },
        { q: "______ comprehensive training in social work.", a: "Completed", opts: ["Completed", "Ended", "Finished", "Stopped"], reason_en: "'Completed' suggests successfully finishing a formal course.", reason_zh: "「Completed」暗示成功完成正式課程。" },
        { q: "______ practical experience through fieldwork.", a: "Gained", opts: ["Gained", "Took", "Found", "Made"], reason_en: "We 'gain' experience.", reason_zh: "我們會「獲得（Gain）」經驗。" },
        { q: "______ strong analytical and communication skills.", a: "Developed", opts: ["Developed", "Grew", "Built", "Made"], reason_en: "Skills are 'developed' over time.", reason_zh: "技能是隨著時間「發展（Developed）」出來的。" },
        { q: "______ me with interpersonal skills.", a: "Equipped", opts: ["Equipped", "Gave", "Helped", "Tool"], reason_en: "'Equipped' means to provide with necessary skills.", reason_zh: "「Equipped」意指裝備了必要的技能。" },
        { q: "______ Level 3 in Chinese Language.", a: "Achieved", opts: ["Achieved", "Got", "Won", "Took"], reason_en: "'Achieved' is better for grades than 'Got'.", reason_zh: "對於成績，「Achieved」比「Got」更好。" },
        { q: "______ an entry-level position.", a: "Seeking", opts: ["Seeking", "Looking", "Wanting", "Hoping"], reason_en: "'Seeking' is formal for looking for a job.", reason_zh: "「Seeking」是尋找工作的正式用語。" },
        { q: "______ data on low-income residents.", a: "Collected", opts: ["Collected", "Gathered", "Got", "Took"], reason_en: "Data is usually 'collected'.", reason_zh: "數據通常是被「收集（Collected）」的。" },
        { q: "______ presentations on projects.", a: "Prepared", opts: ["Prepared", "Made", "Did", "Wrote"], reason_en: "We 'prepare' presentations professionally.", reason_zh: "我們會專業地「準備（Prepare）」簡報。" },
        { q: "______ inventory levels.", a: "Managed", opts: ["Managed", "Watched", "Looked", "Saw"], reason_en: "'Managed' implies responsibility and control.", reason_zh: "「Managed」意味著責任和控制。" },
        { q: "______ enquiries from customers.", a: "Answered", opts: ["Answered", "Replied", "Talked", "Said"], reason_en: "We 'answer' enquiries (questions).", reason_zh: "我們會「回答（Answer）」查詢。" },
        { q: "______ the setup of the festival.", a: "Supported", opts: ["Supported", "Helped", "Aided", "Did"], reason_en: "'Supported' is a strong team-player verb.", reason_zh: "「Supported」是一個強烈的團隊合作動詞。" },
        { q: "______ the accurate stock levels of products.", a: "Ensuring", opts: ["Ensuring", "Watching", "Seeing", "Looking"], reason_en: "'Ensuring' means making sure something is correct.", reason_zh: "「Ensuring」意味著確保某事是正確的。" },
        { q: "______ effectively with a diverse range of people.", a: "Communicate", opts: ["Communicate", "Talk", "Say", "Speak"], reason_en: "'Communicate' covers speaking, listening, and understanding.", reason_zh: "「Communicate」涵蓋了說話、聆聽和理解。" },
        { q: "______ on social policy and community research.", a: "Focusing", opts: ["Focusing", "Looking", "Pointing", "Seeing"], reason_en: "'Focusing on' means to give attention to a specific area.", reason_zh: "「Focusing on」意味著專注於特定領域。" },
        { q: "Seeking a position to ______ my skills and knowledge.", a: "Apply", opts: ["Apply", "Use", "Do", "Make"], reason_en: "'Apply' is the standard term for using skills in a job.", reason
