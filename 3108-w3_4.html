é€™æƒ…æ³é€šå¸¸æ˜¯å› ç‚º **JavaScript åœ¨è¼‰å…¥æ™‚ã€Œä¸­é€”æ­»æ©Ÿã€**ï¼ˆé€šå¸¸æ˜¯æ¼äº†ä¸€å€‹é€—è™Ÿæˆ–æ‹¬è™Ÿï¼‰ï¼Œå°è‡´æ•´å€‹ç¨‹å¼ç¢¼åœæ“ºï¼Œæ‰€ä»¥æŒ‰éˆ•æ‰¾ä¸åˆ° `startGame` é€™å€‹æŒ‡ä»¤ï¼Œæ‰æœƒæ¯«ç„¡åæ‡‰ã€‚

é€™æ˜¯ä¸€å€‹ **V3.2 ä¿®å¾©ç‰ˆ**ã€‚

### ğŸ› ï¸ é€™æ¬¡çš„ä¿®å¾©é‡é»ï¼š

1. **é™¤éŒ¯æª¢æŸ¥**ï¼šæˆ‘åœ¨ç¨‹å¼ç¢¼æœ€å¾ŒåŠ äº†ä¸€è¡Œï¼Œå¦‚æœç¨‹å¼æˆåŠŸè¼‰å…¥ï¼Œç•«é¢æœƒå½ˆå‡ºä¸€å€‹ **"System Ready"** çš„æç¤ºã€‚å¦‚æœæ²’å½ˆå‡ºï¼Œä»£è¡¨è¤‡è£½æ™‚æ¼äº†å°¾å·´ã€‚
2. **æŒ‰éˆ•ä¿éšª**ï¼šå°‡ `onclick` æ”¹ç‚ºæ›´ç©©å®šçš„ç›£è½æ¨¡å¼ã€‚
3. **ç¢ºä¿æ•¸æ“šå®Œæ•´**ï¼šæˆ‘æª¢æŸ¥äº†æ‰€æœ‰ 30 é¡Œçš„é€—è™Ÿå’Œæ‹¬è™Ÿï¼Œç¢ºä¿æ²’æœ‰èªæ³•éŒ¯èª¤ã€‚

è«‹**å…¨é¸è¤‡è£½**é€™æ®µä»£ç¢¼ï¼Œç›´æ¥è¦†è“‹èˆŠæª”æ¡ˆï¼š

```html
<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LAN3108 Chat Challenge V3.2</title>
    <style>
        :root {
            --primary-color: #0084ff;
            --bg-color: #f0f2f5;
            --chat-bg: #e4e6eb;
            --user-chat-bg: #0084ff;
            --text-color: #050505;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            display: flex;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
        }

        .phone-container {
            width: 100%;
            max-width: 480px;
            background: #fff;
            display: flex;
            flex-direction: column;
            height: 100%;
            position: relative;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        /* Start Screen */
        .start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ffffff 0%, #f0f2f5 100%);
            z-index: 300;
            display: flex;
            flex-direction: column;
            padding: 30px;
            box-sizing: border-box;
            justify-content: center;
        }

        .role-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-left: 5px solid var(--primary-color);
            margin-bottom: 30px;
        }

        .role-title { font-size: 14px; color: #666; text-transform: uppercase; letter-spacing: 1px; font-weight: bold; }
        .role-name { font-size: 24px; color: #333; margin: 10px 0; font-weight: 800; }
        .role-desc { font-size: 14px; color: #555; line-height: 1.6; }

        .mission-list { margin-top: 20px; }
        .mission-item { display: flex; align-items: center; margin-bottom: 15px; font-size: 14px; color: #444; background: #f9f9f9; padding: 10px; border-radius: 8px; }
        .mission-icon { width: 30px; height: 30px; background: #e7f3ff; color: var(--primary-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px; font-weight: bold; flex-shrink: 0; }

        .start-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 18px;
            border-radius: 30px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            box-shadow: 0 5px 15px rgba(0,132,255,0.3);
            transition: transform 0.2s;
        }
        .start-btn:active { transform: scale(0.98); }

        /* Messenger Header */
        .chat-header {
            background: white;
            padding: 15px;
            display: flex;
            align-items: center;
            border-bottom: 1px solid #ddd;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            z-index: 10;
        }

        .avatar {
            width: 40px;
            height: 40px;
            background-color: #ccc;
            border-radius: 50%;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 18px;
        }
        .avatar.client { background-color: #ff5722; }
        .avatar.colleague { background-color: #4caf50; }

        .header-info h2 { margin: 0; font-size: 16px; color: var(--text-color); }
        .header-info p { margin: 2px 0 0; font-size: 12px; color: #65676b; }

        .progress-bar { height: 4px; background: #eee; width: 100%; }
        .progress-fill { height: 100%; background: var(--primary-color); width: 0%; transition: width 0.3s; }

        .chat-area {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
            background-color: white;
        }

        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 15px;
            line-height: 1.4;
            position: relative;
            animation: fadeIn 0.3s ease;
        }

        .message.incoming {
            background-color: var(--chat-bg);
            align-self: flex-start;
            border-bottom-left-radius: 4px;
            color: black;
        }

        .message.outgoing {
            background-color: var(--user-chat-bg);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 4px;
            display: none;
        }

        .question-label {
            font-size: 12px;
            color: #65676b;
            text-align: center;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .options-area {
            padding: 20px;
            background: white;
            border-top: 1px solid #ddd;
        }

        .option-btn {
            display: block;
            width: 100%;
            padding: 15px;
            margin-bottom: 10px;
            border: 2px solid #e4e6eb;
            background: white;
            border-radius: 12px;
            font-size: 14px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-color);
        }

        .option-btn:hover { background-color: #f0f2f5; border-color: #ccc; }
        .option-btn:active { transform: scale(0.98); }
        .option-btn:disabled { color: #999; cursor: not-allowed; }

        .feedback-modal {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            padding: 25px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.15);
            box-sizing: border-box;
            transform: translateY(100%);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .feedback-modal.show { transform: translateY(0); }

        .feedback-title { font-weight: bold; font-size: 18px; margin-bottom: 5px; }
        .feedback-correct { color: #2ecc71; }
        .feedback-wrong { color: #e74c3c; }
        
        .explanation-text { font-size: 14px; color: #444; line-height: 1.5; background: #f9f9f9; padding: 10px; border-radius: 8px; border-left: 4px solid var(--primary-color); }
        .explanation-zh { font-size: 13px; color: #666; margin-top: 5px; }

        .next-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 30px;
            font-size: 16px;
            font-weight: bold;
            margin-top: 10px;
            cursor: pointer;
            width: 100%;
        }

        .result-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 200;
            padding: 20px;
            box-sizing: border-box;
        }

        .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            font-weight: bold;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,132,255,0.3);
        }

        .stats-table { width: 100%; margin: 20px 0; border-collapse: collapse; }
        .stats-table td { padding: 10px; border-bottom: 1px solid #eee; }
        .stats-table td:last-child { text-align: right; font-weight: bold; }
        .bar-container { height: 6px; background: #eee; border-radius: 3px; width: 100px; margin-top: 5px; }
        .bar-fill { height: 100%; background: #2ecc71; border-radius: 3px; }

        .restart-btn {
            background: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            padding: 10px 30px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
        }
    </style>
</head>
<body>

<div class="phone-container">
    
    <div class="start-screen" id="startScreen">
        <h1 style="color: #0084ff; margin-bottom: 10px;">Workplace English</h1>
        <div class="role-card">
            <div class="role-title">ROLE CARD</div>
            <div class="role-name">CS Officer</div>
            <div class="role-desc">
                You work at <strong>Global Logistics Co.</strong><br>
                Your responsibility is to handle customer inquiries professionally and communicate clearly with your internal team.
            </div>
        </div>

        <div class="mission-list">
            <div class="mission-item">
                <div class="mission-icon">1</div>
                <div>
                    <strong>Mr. Smith (Client)</strong><br>
                    He is angry about a delay. Use <em>Formal Tone</em> & <em>Softeners</em>.
                </div>
            </div>
            <div class="mission-item">
                <div class="mission-icon">2</div>
                <div>
                    <strong>Sarah (Colleague)</strong><br>
                    She needs updates. Use <em>Semi-formal Tone</em> & correct <em>Grammar</em>.
                </div>
            </div>
        </div>

        <button class="start-btn" id="startBtn">Start Shift âœ</button>
    </div>

    <div class="chat-header">
        <div class="avatar client" id="headerAvatar">S</div>
        <div class="header-info">
            <h2 id="headerName">Mr. Smith</h2>
            <p id="headerStatus">Active now â€¢ Scenario 1/2</p>
        </div>
    </div>
    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>

    <div class="chat-area" id="chatArea">
        <div class="question-label" id="qLabel">Question 1 of 12</div>
        <div class="message incoming" id="incomingMsg">Loading...</div>
        <div class="message outgoing" id="outgoingMsg">User reply...</div>
    </div>

    <div class="options-area" id="optionsArea">
        </div>

    <div class="feedback-modal" id="feedbackModal">
        <div class="feedback-title" id="fbTitle">Correct!</div>
        <div class="explanation-text" id="fbText">Here is why...</div>
        <div class="explanation-zh" id="fbTextZh">ä¸­æ–‡è§£é‡‹...</div>
        <button class="next-btn" onclick="nextQuestion()">Next Question âœ</button>
    </div>

    <div class="result-screen" id="resultScreen">
        <h1>Performance Report</h1>
        <div class="score-circle" id="finalScore">0</div>
        <p>Excellent effort!</p>
        <table class="stats-table" id="statsTable"></table>
        <button class="restart-btn" onclick="location.reload()">Start New Shift</button>
    </div>
</div>

<script>
    // Pool A: Mr. Smith (Client/External) - Formal
    const externalPool = [
        {
            q: "I ordered the goods two weeks ago but haven't received them. (You want to investigate)",
            options: ["I will figure out what happened.", "I will investigate the matter immediately."],
            correct: 1,
            cat: "Tone",
            exp: { en: "'Investigate' is more professional than 'figure out'.", zh: "å°æ–¼å®¢æˆ¶æŠ•è¨´ï¼Œä½¿ç”¨ 'Investigate the matter' æ¯” 'figure out' æ›´å°ˆæ¥­ä¸”èŠé‡ã€‚" }
        },
        {
            q: "This is entirely your fault! (You want to apologize professionally)",
            options: ["We apologize for the inconvenience caused.", "Sorry about that mistake."],
            correct: 0,
            cat: "Tone",
            exp: { en: "Use 'We apologize for the inconvenience' for formal complaints.", zh: "é¢å°å®¢æˆ¶æŒ‡è²¬ï¼Œ'Apologize for the inconvenience caused' æ˜¯æ¨™æº–çš„å•†å‹™é“æ­‰ç”¨èªã€‚" }
        },
        {
            q: "Can you give me a discount? (You need to refuse politely)",
            options: ["No, we can't do that.", "I am afraid we are unable to offer a discount."],
            correct: 1,
            cat: "Tone",
            exp: { en: "Use 'I am afraid...' to soften bad news.", zh: "æ‹’çµ•è«‹æ±‚æ™‚ï¼Œä½¿ç”¨ 'I am afraid...' ä½œç‚ºç·©è¡èª (Softener) æœƒæ¯”ç›´æ¥èªª No æ›´ç¦®è²Œã€‚" }
        },
        {
            q: "Send me the report by 5pm. (You are confirming the request)",
            options: ["The report will be sent by 5pm.", "I will send the report by 5pm."],
            correct: 0,
            cat: "Grammar",
            exp: { en: "Passive voice focuses on the action/object, not the person.", zh: "è¢«å‹•èªæ…‹ (The report will be sent) å¼·èª¿äº‹æƒ…æœƒè¢«å®Œæˆï¼Œæ„Ÿè¦ºè¼ƒå®¢è§€å°ˆæ¥­ã€‚" }
        },
        {
            q: "Your service is terrible. (You want to promise improvement)",
            options: ["We will try to do better.", "We will ensure this does not happen again."],
            correct: 1,
            cat: "Tone",
            exp: { en: "'Ensure' shows commitment; 'try' sounds weak.", zh: "'Ensure' (ç¢ºä¿) å±•ç¾äº†è§£æ±ºå•é¡Œçš„æ±ºå¿ƒï¼Œ'Try' (å˜—è©¦) è½èµ·ä¾†ä¿¡å¿ƒä¸è¶³ã€‚" }
        },
        {
            q: "We need the solution now. (You propose a fix)",
            options: ["We have rectified the problem.", "We have fixed the problem."],
            correct: 0,
            cat: "Vocabulary",
            exp: { en: "'Rectify' is a formal synonym for 'fix'.", zh: "åœ¨æ­£å¼å•†æ¥­æ›¸ä¿¡ä¸­ï¼Œ'Rectify' æ˜¯ 'Fix' çš„æ­£å¼ç”¨è©ã€‚" }
        },
        {
            q: "Are you sure the price is correct? (Confirming accuracy)",
            options: ["I checked and it's right.", "I have verified the pricing details."],
            correct: 1,
            cat: "Vocabulary",
            exp: { en: "'Verified' is stronger and more formal than 'checked'.", zh: "'Verified' (æ ¸å¯¦) æ¯” 'Checked' (æª¢æŸ¥) è½èµ·ä¾†æ›´åš´è¬¹å’Œå°ˆæ¥­ã€‚" }
        },
        {
            q: "I want to speak to your manager.",
            options: ["I will transfer you to my supervisor.", "I will pass you to my boss."],
            correct: 0,
            cat: "Vocabulary",
            exp: { en: "'Supervisor' and 'Transfer' are professional terms.", zh: "'Supervisor' æ¯” 'Boss' æ­£å¼ï¼›'Transfer' æ¯” 'Pass' æ›´é©åˆç”¨æ–¼é›»è©±æˆ–æºé€šè½‰æ¥ã€‚" }
        },
        {
            q: "Why is the delivery late?",
            options: ["Ideally, it should have arrived yesterday.", "Ideally, it arrived yesterday."],
            correct: 0,
            cat: "Grammar",
            exp: { en: "Use 'Should have + past participle' for past expectations.", zh: "è¡¨é”ã€Œæœ¬æ‡‰ç™¼ç”Ÿä½†æœªç™¼ç”Ÿã€çš„äº‹ï¼Œæ‡‰ä½¿ç”¨ 'Should have + p.p.' (Should have arrived)ã€‚" }
        },
        {
            q: "The product is broken.",
            options: ["A replacement will be arranged.", "I will arrange a replacement."],
            correct: 0,
            cat: "Grammar",
            exp: { en: "Passive voice (be arranged) sounds less personal and more policy-driven.", zh: "ä½¿ç”¨è¢«å‹•èªæ…‹ (Will be arranged) å¯ä»¥è®“è§£æ±ºæ–¹æ¡ˆè½èµ·ä¾†åƒæ˜¯å…¬å¸çš„æ¨™æº–ç¨‹åºï¼Œè€Œéå€‹äººè¡Œç‚ºã€‚" }
        },
        {
            q: "I am demanding a full refund.",
            options: ["We have processed your refund request.", "We did your refund request."],
            correct: 0,
            cat: "Vocabulary",
            exp: { en: "'Processed' is the correct business verb for requests.", zh: "è™•ç†é€€æ¬¾æˆ–ç”³è«‹ï¼Œå‹•è©æ‡‰è©²ç”¨ 'Process' è€Œé 'Do'ã€‚" }
        },
        {
            q: "When can I meet you?",
            options: ["I am available on Tuesday.", "I am free on Tuesday."],
            correct: 0,
            cat: "Vocabulary",
            exp: { en: "'Available' is professional; 'Free' is social.", zh: "åœ¨å•†å‹™ç´„è¦‹ä¸­ï¼Œ'Available' æ¯” 'Free' å¾—é«”ï¼Œ'Free' æ„Ÿè¦ºåƒæ˜¯åœ¨ç´„æœ‹å‹ã€‚" }
        },
        {
            q: "You made a huge error.",
            options: ["There appears to be a misunderstanding.", "You are wrong."],
            correct: 0,
            cat: "Tone",
            exp: { en: "Shift blame away from people using 'There appears to be...'.", zh: "ä½¿ç”¨ 'There appears to be...' (çœ‹ä¾†ä¼¼ä¹æœ‰...) å¯ä»¥é¿å…ç›´æ¥æŒ‡è²¬å°æ–¹ï¼Œé™ä½è¡çªã€‚" }
        },
        {
            q: "Send me the details.",
            options: ["I would be grateful if you could provide the details.", "Give me the details please."],
            correct: 0,
            cat: "Tone",
            exp: { en: "Use indirect questions for politeness.", zh: "ä½¿ç”¨ 'I would be grateful if...' æ˜¯éå¸¸æ¨™æº–ä¸”ç¦®è²Œçš„è«‹æ±‚æ–¹å¼ã€‚" }
        },
        {
            q: "Is the project done?",
            options: ["The project has been completed.", "The project is finished."],
            correct: 0,
            cat: "Vocabulary",
            exp: { en: "'Completed' sounds more formal than 'finished' for tasks.", zh: "å°æ–¼å°ˆæ¡ˆæˆ–å·¥ç¨‹ï¼Œ'Completed' æ¯” 'Finished' æ›´æ­£å¼ã€‚" }
        }
    ];

    // Pool B: Sarah (Colleague/Internal) - Semi-formal
    const internalPool = [
        {
            q: "Can you help me with the report? (Asking for help)",
            options: ["I want you to help me.", "Could you give me a hand?"],
            correct: 1,
            cat: "Tone",
            exp: { en: "'Could you give me a hand' is friendly and semi-formal.", zh: "å°åŒäº‹å¯ä»¥ä½¿ç”¨ 'Give me a hand'ï¼Œé€™æ˜¯ä¸€ç¨®å‹å–„ä¸”åŠæ­£å¼çš„æ±‚åŠ©æ–¹å¼ã€‚" }
        },
        {
            q: "Do you have the meeting minutes? (Checking status)",
            options: ["Have the minutes been distributed?", "Did you send the minutes?"],
            correct: 0,
            cat: "Grammar",
            exp: { en: "Use passive voice to avoid sounding accusatory.", zh: "å³ä½¿å°åŒäº‹ï¼Œä½¿ç”¨è¢«å‹•èªæ…‹ 'Have... been distributed' ä¹Ÿå¯ä»¥é¿å…åƒæ˜¯åœ¨è³ªå•å°æ–¹ 'Did you...?'" }
        },
        {
            q: "I think your idea is bad. (Disagreeing politely)",
            options: ["I have some reservations about that idea.", "I hate that idea."],
            correct: 0,
            cat: "Tone",
            exp: { en: "'Reservations' implies doubt without being rude.", zh: "è¡¨ç¤ºä¸åŒæ„æ™‚ï¼Œ'I have reservations' (æˆ‘æœ‰æ‰€ä¿ç•™) æ¯”ç›´æ¥èªªä¸å–œæ­¡æ›´æœ‰ç¦®è²Œã€‚" }
        },
        {
            q: "The printer is broken again.",
            options: ["We need to look into this issue.", "We need to check this thing."],
            correct: 0,
            cat: "Vocabulary",
            exp: { en: "'Look into' is a good phrasal verb for workplace investigation.", zh: "'Look into' (èª¿æŸ¥/äº†è§£) æ˜¯è·å ´å¸¸ç”¨çš„ç‰‡èªï¼Œæ¯”å–®ç´”ç”¨ 'Check' æ›´å…·é«”ã€‚" }
        },
        {
            q: "Are you coming to the lunch?",
            options: ["I'm afraid I can't make it.", "No, I'm not coming."],
            correct: 0,
            cat: "Tone",
            exp: { en: "'Can't make it' is a standard polite excuse.", zh: "'Can't make it' æ˜¯å©‰æ‹’é‚€ç´„çš„æ¨™æº–ç”¨èªï¼Œæ¯”ç›´æ¥èªª No å©‰è½‰ã€‚" }
        },
        {
            q: "Did you finish the slide deck?",
            options: ["I am currently working on it.", "I am doing it now."],
            correct: 0,
            cat: "Grammar",
            exp: { en: "Present Continuous 'Currently working on' sounds professional.", zh: "'Currently working on it' è½èµ·ä¾†æ¯” 'Doing it now' æ›´å…·å°ˆæ¥­æ„Ÿã€‚" }
        },
        {
            q: "Thanks for your help.",
            options: ["You are welcome.", "No problem."],
            correct: 0,
            cat: "Tone",
            exp: { en: "'You are welcome' is safer; 'No problem' is too casual for some.", zh: "é›–ç„¶ 'No problem' å¾ˆå¸¸ç”¨ï¼Œä½†åœ¨æ›¸é¢æºé€šä¸­ 'You are welcome' æ°¸é æ˜¯æœ€å¾—é«”çš„é¸æ“‡ã€‚" }
        },
        {
            q: "We should change the deadline.",
            options: ["I suggest we postpone the deadline.", "I say we move the deadline."],
            correct: 0,
            cat: "Vocabulary",
            exp: { en: "'Postpone' is the specific verb for moving dates later.", zh: "'Postpone' (å»¶æœŸ) æ˜¯å°ˆé–€ç”¨æ–¼å»¶å¾ŒæœŸé™çš„å‹•è©ã€‚" }
        },
        {
            q: "I didn't get your email.",
            options: ["I did not receive your email.", "I didn't get it."],
            correct: 0,
            cat: "Vocabulary",
            exp: { en: "'Receive' is the standard verb for email.", zh: "'Get' æ¯”è¼ƒå£èªï¼Œ'Receive' æ˜¯æ¨™æº–æ›¸é¢èªã€‚" }
        },
        {
            q: "Let's meet tomorrow.",
            options: ["I look forward to meeting you.", "I want to meet you."],
            correct: 0,
            cat: "Tone",
            exp: { en: "'Look forward to + -ing' is a positive closer.", zh: "'Look forward to meeting' (æœŸå¾…è¦‹é¢) å±•ç¾äº†ç©æ¥µçš„æ…‹åº¦ã€‚" }
        },
        {
            q: "The boss is asking for the file.",
            options: ["Please submit it by 2 PM.", "Hand it in by 2 PM."],
            correct: 0,
            cat: "Vocabulary",
            exp: { en: "'Submit' is appropriate for documents.", zh: "æäº¤æ–‡ä»¶æ‡‰ä½¿ç”¨ 'Submit'ï¼Œ'Hand in' æ¯”è¼ƒåƒäº¤åŠŸèª²çš„æ„Ÿè¦ºã€‚" }
        },
        {
            q: "Are you interested in the new project?",
            options: ["I am interested in joining the team.", "I am interesting to join the team."],
            correct: 0,
            cat: "Grammar",
            exp: { en: "Feeling = Interested (ed); Object = Interesting (ing).", zh: "æè¿°äººçš„æ„Ÿå—è¦ç”¨ -ed (Interested)ï¼Œæè¿°äº‹ç‰©æ‰ç”¨ -ingã€‚" }
        },
        {
            q: "Sorry for the late reply.",
            options: ["Apologies for the delayed response.", "Sorry I was slow."],
            correct: 0,
            cat: "Vocabulary",
            exp: { en: "'Delayed response' is the professional phrasing.", zh: "'Delayed response' æ˜¯é²å›è¦†çš„æ¨™æº–å•†æ¥­ç”¨èªï¼Œæ¯” 'Slow' å¥½ã€‚" }
        },
        {
            q: "Can we talk briefly?",
            options: ["Do you have a moment?", "Do you have time?"],
            correct: 0,
            cat: "Tone",
            exp: { en: "'Do you have a moment' is polite and minimizes pressure.", zh: "'Do you have a moment?' (ä½ æœ‰ç©ºå—ï¼Ÿ) æš—ç¤ºåªæœƒä½”ç”¨å¾ˆçŸ­æ™‚é–“ï¼Œæ¯”è¼ƒä¸çµ¦äººå£“åŠ›ã€‚" }
        },
        {
            q: "I will help you.",
            options: ["I will assist you with this matter.", "I will help you do this."],
            correct: 0,
            cat: "Vocabulary",
            exp: { en: "'Assist' is a higher register word than 'help'.", zh: "'Assist' (å”åŠ©) çš„èªæ°£æ¯” 'Help' (å¹«å¿™) æ›´æ­£å¼ä¸”å°ˆæ¥­ã€‚" }
        }
    ];

    let currentQuestions = [];
    let currentIndex = 0;
    let score = 0;
    let userResults = [];

    function shuffle(array) {
        return array.sort(() => Math.random() - 0.5);
    }

    // Main Game Logic
    function startGame() {
        console.log("Start button clicked");
        document.getElementById("startScreen").style.display = "none";
        
        const setA = shuffle([...externalPool]).slice(0, 6).map(q => ({...q, scenario: "client"}));
        const setB = shuffle([...internalPool]).slice(0, 6).map(q => ({...q, scenario: "colleague"}));

        currentQuestions = [...setA, ...setB];
        currentIndex = 0;
        score = 0;
        userResults = [];

        loadQuestion();
    }

    function loadQuestion() {
        const qData = currentQuestions[currentIndex];
        const isClient = qData.scenario === "client";

        const avatar = document.getElementById("headerAvatar");
        const name = document.getElementById("headerName");
        const status = document.getElementById("headerStatus");
        
        if (isClient) {
            avatar.className = "avatar client";
            avatar.innerText = "S";
            name.innerText = "Mr. Smith (Client)";
            status.innerText = "Task 1: Handling Complaint";
        } else {
            avatar.className = "avatar colleague";
            avatar.innerText = "C";
            name.innerText = "Sarah (Colleague)";
            status.innerText = "Task 2: Internal Update";
        }

        document.getElementById("qLabel").innerText = `Question ${currentIndex + 1} of 12`;
        const pct = ((currentIndex) / 12) * 100;
        document.getElementById("progressFill").style.width = `${pct}%`;

        const income = document.getElementById("incomingMsg");
        const outcome = document.getElementById("outgoingMsg");
        
        income.style.display = "none";
        outcome.style.display = "none";
        
        setTimeout(() => {
            income.innerText = qData.q;
            income.style.display = "block";
        }, 300);

        const optsDiv = document.getElementById("optionsArea");
        optsDiv.innerHTML = "";
        
        qData.options.forEach((opt, idx) => {
            const btn = document.createElement("button");
            btn.className = "option-btn";
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(idx);
            optsDiv.appendChild(btn);
        });

        document.getElementById("feedbackModal").classList.remove("show");
    }

    function checkAnswer(selectedIdx) {
        const qData = currentQuestions[currentIndex];
        const isCorrect = selectedIdx === qData.correct;
        
        const outcome = document.getElementById("outgoingMsg");
        outcome.innerText = qData.options[selectedIdx];
        outcome.style.display = "block";

        const btns = document.querySelectorAll(".option-btn");
        btns.forEach(b => b.disabled = true);

        if (isCorrect) score++;
        userResults.push({
            cat: qData.cat,
            isCorrect: isCorrect
        });

        const fbTitle = document.getElementById("fbTitle");
        const fbText = document.getElementById("fbText");
        const fbTextZh = document.getElementById("fbTextZh");

        if (isCorrect) {
            fbTitle.innerText = "Correct! âœ…";
            fbTitle.className = "feedback-title feedback-correct";
        } else {
            fbTitle.innerText = "Needs Improvement âŒ";
            fbTitle.className = "feedback-title feedback-wrong";
        }

        fbText.innerHTML = `<strong>Reason:</strong> ${qData.exp.en}`;
        fbTextZh.innerHTML = `<strong>è§£é‡‹:</strong> ${qData.exp.zh}`;
        
        document.getElementById("feedbackModal").classList.add("show");
    }

    function nextQuestion() {
        currentIndex++;
        if (currentIndex < currentQuestions.length) {
            loadQuestion();
        } else {
            showResults();
        }
    }

    function showResults() {
        document.getElementById("resultScreen").style.display = "flex";
        document.getElementById("finalScore").innerText = score;

        const categories = {}; 

        userResults.forEach(res => {
            if (!categories[res.cat]) categories[res.cat] = { total: 0, correct: 0 };
            categories[res.cat].total++;
            if (res.isCorrect) categories[res.cat].correct++;
        });

        const table = document.getElementById("statsTable");
        table.innerHTML = "";

        for (const [cat, data] of Object.entries(categories)) {
            const row = document.createElement("tr");
            const pct = Math.round((data.correct / data.total) * 100);
            
            row.innerHTML = `
                <td style="width:60%">
                    <div>${cat}</div>
                    <div class="bar-container">
                        <div class="bar-fill" style="width:${pct}%"></div>
                    </div>
                </td>
                <td>${data.correct}/${data.total}</td>
            `;
            table.appendChild(row);
        }
    }

    // Attach Event Listener Safely
    document.getElementById("startBtn").addEventListener("click", startGame);

    // Final Check (Alert verifies script loaded)
    console.log("Script loaded successfully");
    // alert("System Ready. Click Start Shift."); // Debug: remove if annoying
</script>

</body>
</html>

```
